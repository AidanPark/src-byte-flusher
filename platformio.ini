; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:adafruit_clue_nrf52840]
platform = nordicnrf52
board = adafruit_clue_nrf52840
framework = arduino

; Pro Micro 폼팩터 nRF52840 보드로 빌드/업로드하려면,
; 아래 예시 env를 참고해서 보드 ID를 맞춰주세요.
; (VS Code PlatformIO 확장: Boards에서 보드 ID 검색 가능)
;
; 참고 후보(보드에 따라 다름):
; - nice_nano
; - adafruit_feather_nrf52840
; - adafruit_itsybitsy_nrf52840
; - seeed_xiao_nrf52840
;
; 참고: 일부 "nice!nano v2 호환" 표기 보드는 PlatformIO(nordicnrf52)에 `nice_nano` 보드 ID가 없어서
; UnknownBoard가 날 수 있습니다.
; 또한 일부 보드는 USB VID/PID가 239A:8029로 잡히는데, 이는 Adafruit nRF52840 Feather 계열 부트로더와
; 유사한 케이스가 있습니다.
; 이런 경우 PlatformIO에서는 아래처럼 `adafruit_feather_nrf52840` 보드 정의를 사용하는 구성이 실용적입니다.

[env:nice_nano_v2_compatible]
platform = nordicnrf52
board = adafruit_feather_nrf52840
framework = arduino

; 업로드 설정
; - 이 보드는 업로드 시(특히 부트로더 모드) COM 포트가 바뀔 수 있습니다.
; - 자동 탐색이 안 될 때는 아래 중 하나로 upload_port를 지정하세요.
;   1) 이 줄의 주석을 해제하고 COM 포트를 직접 적기: upload_port = COM7
;   2) 환경변수 PIO_UPLOAD_PORT로 지정(파일 수정 없이):
;        PowerShell:  $env:PIO_UPLOAD_PORT = "COM7"
;        CMD:        set PIO_UPLOAD_PORT=COM7
;      (VS Code 작업/터미널에서도 동일하게 적용)
; upload_port = COM7
upload_port = ${sysenv.PIO_UPLOAD_PORT}

; 업로드 팁
; - 부트로더 모드 진입: 보드 RESET을 빠르게 2번(더블탭) 누르는 방식이 흔합니다.
; - 업로드가 실패하면, 부트로더 모드에서 새 COM 포트로 바뀌는지 확인하세요.
; - 환경에 따라 아래 옵션이 필요할 수 있습니다(우선은 주석 유지 권장).
; upload_protocol = nrfutil
; upload_port = COMx

; HID-only (Target PC) 빌드
; - Target PC에서는 키보드(HID)로만 보이고 COM 포트가 생성되지 않도록 CDC를 제거한다.
; - 업로드는 USB CDC(1200bps touch)가 아니라, 웹 UI의 "부트로더 진입"(BLE)로 DFU 모드로 진입한 뒤
;   부트로더 COM 포트를 대상으로 수행하는 것을 권장.
[env:nice_nano_v2_compatible_hid_only]
extends = env:nice_nano_v2_compatible
build_flags =
	${env:nice_nano_v2_compatible.build_flags}
	-D CFG_TUD_CDC=0
extra_scripts =
	pre:scripts/patch_tinyusb.py
